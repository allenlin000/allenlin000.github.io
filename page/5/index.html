<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>平屋慢生活 - Coding也是生活的溫暖調味</title><meta name="author" content="Allen"><meta name="copyright" content="Allen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="平屋慢生活">
<meta property="og:url" content="https://allenlin000.github.io.git/page/5/">
<meta property="og:site_name" content="平屋慢生活">
<meta property="og:locale">
<meta property="og:image" content="https://i.imgur.com/q4xr50n.png">
<meta property="article:author" content="Allen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/q4xr50n.png"><link rel="shortcut icon" href="/img/kiwibird.png"><link rel="canonical" href="https://allenlin000.github.io.git/page/5/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '平屋慢生活',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2026-01-14 22:36:57'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.imgur.com/q4xr50n.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">219</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://i.imgur.com/86eENHu.png')"><nav id="nav"><span id="blog-info"><a href="/" title="平屋慢生活"><span class="site-name">平屋慢生活</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">平屋慢生活</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/06/webapi-middlewareeee/" title="Middleware"><img class="post-bg" src="https://i.imgur.com/xAbpKgd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Middleware"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/06/webapi-middlewareeee/" title="Middleware">Middleware</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-06T06:07:05.000Z" title="Created 2025-11-06 14:07:05">2025-11-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/WebAPI/">WebAPI</a></span></div><div class="content">🎃 Middleware 的運作原理ASP.NET Core 的請求流程是一條「洋蔥模型」
Request → [Middleware1] → [Middleware2] → [Middleware3] → Controller                                       ← Response ←
每一層 Middleware 都是依照 註冊順序 被包起來的，當 UseMiddleware() 被呼叫時，ASP.NET Core 會建立一個委派 (RequestDelegate)，將後面的 Middleware 當作「下一層」傳入，執行邏輯後決定是否呼叫 await next(context)



🎃 如何「交換 Middleware 的順序」

✅ 方法一：直接調整註冊順序在 Program.cs 或 Startup.cs 的 Configure() 方法中，Middleware 是 照順序被執行 的
123app.UseMiddleware&lt;A&gt;();app.UseMiddleware&lt;B&gt;();app.UseMiddl ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/06/DI-Dependency-Injection-Stateless-Stateful/" title="Dependency Injection - Stateless / Stateful"><img class="post-bg" src="https://i.imgur.com/xAbpKgd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dependency Injection - Stateless / Stateful"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/06/DI-Dependency-Injection-Stateless-Stateful/" title="Dependency Injection - Stateless / Stateful">Dependency Injection - Stateless / Stateful</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-06T02:43:05.000Z" title="Created 2025-11-06 10:43:05">2025-11-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%A3%AE/">注入之森</a></span></div><div class="content">🪵 先回顧三種生命週期 (Lifetime)在 .NET DI 裡，我們註冊服務時通常會用三種生命週期



生命週期
建立時機
何時被回收
常見用途



Transient
每次注入時都會 new 一個新的實例
呼叫結束後可回收
短期任務、帶狀態的物件


Scoped
每個 Request (或每個範圍) 共用同一個實例
Request 結束時回收
Web Request、單次工作


Singleton
程式啟動時建立一次，全程共用
應用程式結束時回收
共用服務、無狀態服務


判斷要用哪一種：看「是否有狀態」



狀態性質
適合的 Lifetime
原因



有狀態 (Stateful)
Transient &#x2F; Scoped
需要獨立實例以避免狀態被共用


無狀態 (Stateless)
Singleton
可以安全共用，不會互相影響





🪵 為什麼「無狀態」通常用 Singleton？
無狀態類別不會保存任何資料
多執行緒 (multi-thread) 呼叫時不會互相干擾
所以可以讓整個應用程式共用同一個實例
可以減少 new 實例的開銷，提高效能 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/03/DeepType-ThinkingMind-%E9%80%B1%E6%9C%9F%E6%80%A7%E8%A7%B8%E7%99%BC/" title="Modulo — 記憶の螺旋"><img class="post-bg" src="https://github.com/CHI-KEKE/pics/blob/main/%E6%80%9D%E7%B4%A2%E6%97%A5%E5%92%8C/Stamp.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Modulo — 記憶の螺旋"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/03/DeepType-ThinkingMind-%E9%80%B1%E6%9C%9F%E6%80%A7%E8%A7%B8%E7%99%BC/" title="Modulo — 記憶の螺旋">Modulo — 記憶の螺旋</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-03T00:32:03.000Z" title="Created 2025-11-03 08:32:03">2025-11-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%80%9D%E7%B4%A2%E6%97%A5%E5%92%8C/">思索日和</a></span></div><div class="content">
我們的人生，其實一直在「取餘數」。  情緒、記憶、學習、努力都不會線性遞增，而是像 % 一樣，在週期中反覆歸零、再度啟程。
有時你覺得自己白學了、白走了，那不代表歸零，而是走到了週期的端點。  正如程式中的 (value % max) + 1，每一次「重來」，其實都讓下一次更穩、更深、更有方向
時間並非直線，而是一個緩慢旋轉的螺旋。我們以為在重複，其實在上升。  我們以為忘記，其實在沉澱
modulo operation，代表著一個循環的時間軸



場景
用法
解釋



日誌
if (i % 100 == 0)
每 100 筆印一次進度


遊戲
if (frameCount % 60 == 0)
每秒（60 幀）更新一次畫面


備份
if (dayCount % 7 == 0)
每 7 天備份一次資料


批次任務
if (index % batchSize == 0)
每批結束時觸發事件




🕊️ spiral learning9 天內學會 3 個日文詞彙，每天會複習一次，每三天會加強記憶深度
我們需要把 週期 (%) 的節奏，結合 遞進的權重
12345678910 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/02/CSHARP-Closure/" title="Closure"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Closure"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/02/CSHARP-Closure/" title="Closure">Closure</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-02T13:47:03.000Z" title="Created 2025-11-02 21:47:03">2025-11-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">
程式中的 Closure，就像人生的記憶機制。它讓一段邏輯，不只記得「要做什麼」，也記得「曾經與誰有關」。在我們離開某個場景之後，它仍攜帶著當時的狀態、情緒與環境，就像一個攜帶回憶的函式，延續著那份未完的故事。


🌸 ClosureClosure 使「lambda 可以用外部變數」，但它的本質遠不只是「抓外部變數來用」，而是一種讓函式擁有「記憶狀態」的機制



🌸 方法呼叫（傳參數）立刻執行 → 當下的值是什麼就拿什麼
123456789101112131415void Show(int n) &#123;    Console.WriteLine(n);&#125;for (int i = 0; i &lt; 5; i++)&#123;    Show(i); // 當下的 i 是多少就傳進去&#125;//0//1//2//3//4




🌸 Lambda先存下來、之後才執行 → 那時變數可能早就變了！這裡是「現在馬上」把 i 的值傳進 Show()，所以每次呼叫都是當下的值。Lambda &#x3D; 「先記下做法，之後才做」
1234567891011121314 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/02/CSHARP-static-method-instance-method/" title="static method, instance method"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="static method, instance method"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/02/CSHARP-static-method-instance-method/" title="static method, instance method">static method, instance method</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-02T03:27:05.000Z" title="Created 2025-11-02 11:27:05">2025-11-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">
有些事，必須「由我親自完成」。像是「寄信給某個人」、「打開我家的門」、「改變自己的心情」。這些行為，都需要知道「我是誰」 ， 要有具體的對象，行為才有意義
在程式裡，這樣的行為就像 實例方法（Instance Method）。它依附在一個物件上，只有當那個物件存在（例如某個字串、某個人、某個訂單），方法才能運作，因為它需要用到那個物件的內部狀態
但有些事，誰都能做。像是「把字變成大寫」、「計算兩個數的和」、「取得目前時間」。它們不需要知道「我是誰」，只要照著規則執行，就能得到相同的結果


🌸 設計核心原則：是否依賴物件狀態


類型
是否依賴物件狀態
範例
設計意圖



實例方法 (Instance Method)
✅ 是
string.Substring()
方法的邏輯需要使用「該物件的資料」。


靜態方法 (Static Method)
❌ 否
char.ToUpper()
方法不依賴任何物件，只根據輸入參數運算。





🌸 實例方法 : string.Substring()因為它要「從這個字串」取出一部分，也就是它需要知道目前這個字串的內容。它的邏輯會使用 thi ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/11/01/EFCORE-Transaction-and-Savechanges/" title="EFCore - Tranaction and SaveChanges"><img class="post-bg" src="https://github.com/CHI-KEKE/pics/blob/main/EF/ocean.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="EFCore - Tranaction and SaveChanges"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/11/01/EFCORE-Transaction-and-Savechanges/" title="EFCore - Tranaction and SaveChanges">EFCore - Tranaction and SaveChanges</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-11-01T03:24:00.000Z" title="Created 2025-11-01 11:24:00">2025-11-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%B3%87%E6%96%99%E7%96%86%E7%95%8C%E7%9A%84%E8%88%AA%E5%9C%96/">資料疆界的航圖</a></span></div><div class="content">


🌊 SaveChanges() 和 Transaction 的關係在資料庫的世界裡，一次或多次資料修改（INSERT、UPDATE、DELETE）必須放在 交易（Transaction） 裡，這樣如果其中一步錯了，整個動作都可以 rollback 回去，確保資料不會半途修改一半
SaveChanges() 就是 EF Core 幫你「把所有變動打包起來執行」的動作。而 EF Core 為了確保這個過程的資料一致性，在執行時會自動幫你開一個 Transaction



狀況
EF Core 內部會自動開啟交易嗎？
SaveChanges() 會自動 Commit 嗎？
備註



✅ 你 沒有 手動開交易
✅ 是
✅ 是
SaveChanges() 自動包一個 transaction，執行完自動 commit


⚠️ 你 手動開了交易 (BeginTransaction())
❌ 否（你已經開了）
❌ 否（尊重你控制的交易）
SaveChanges() 只會執行 SQL，不會幫你 commit


當你呼叫 context.SaveChanges()，EF Core 做了這幾 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/10/30/CSHARP-Generic-2/" title="Generic - 記憶の箱"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Generic - 記憶の箱"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/10/30/CSHARP-Generic-2/" title="Generic - 記憶の箱">Generic - 記憶の箱</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-10-30T09:19:05.000Z" title="Created 2025-10-30 17:19:05">2025-10-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">
我們的大腦，其實就像一個會自動學習的「快取系統」。有些經驗，一次就讓我們記得深刻；有些事情，卻需要多次重複才會留下印象。有些回憶被時間淘汰、過期了，就像舊的快取資料一樣，被默默清除；但也正因為如此，新的經驗才能被寫入，人生才不會停在原地
程式中的 泛型（Generic），讓我們能用同一套邏輯，處理不同型別的資料；人生中，我們也在學習如何用同樣的「思考模式」，面對不同的狀況。無論是人際關係、工作挑戰、或自我成長，我們都在建立一個「屬於自己的泛型快取」——那些經驗的抽象化、情緒的緩存、學習的積累，都讓我們在未來遇到類似情境時，不必從零開始


🌸 泛型與快取泛型不僅在計算和包裝上有用，在快取機制中也能發揮強大的作用。透過泛型快取類別，我們可以建立一個通用的快取解決方案，適用於任何型別的資料


🔹 SimpleCache1234567891011121314151617181920212223242526272829303132333435363738394041void Main()&#123;    var cache = new SimpleCache&lt;string&gt ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/10/29/wrapper-adapter/" title="Untitled"><img class="post-bg" src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/10/29/wrapper-adapter/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-10-29T01:06:05.548Z" title="Created 2025-10-29 09:06:05">2025-10-29</time></span></div><div class="content">1.5.2 WrapperWrapper 模式是一種常見的設計模式，它可以用來包裝現有的物件，提供額外的功能或改變其行為。在泛型的幫助下，我們可以建立通用的 Wrapper 類別來處理任何型別的物件
🎯 Wrapper 基本概念Wrapper 類別的主要目的是：

🔐 封裝原始物件：提供對底層物件的受控存取
🎨 增強功能：在不修改原始類別的情況下添加新功能
🛡️ 保護資料：控制對包裝物件的存取方式
🔄 轉換介面：為不相容的介面提供適配

📝 實際應用範例以下範例展示了泛型 Wrapper 的使用和一些需要注意的問題：
123456789101112131415161718192021222324252627282930313233343536void Main()&#123;    var items = new List&lt;int&gt; &#123; 1, 2, 3 &#125;;    var wrappers = CreateWrapper2&lt;int&gt;(items);    var store = new List&lt;Wrapper&lt;int ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/10/27/CSHARP-Generic-1/" title="Generic - 型越の魂"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Generic - 型越の魂"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/10/27/CSHARP-Generic-1/" title="Generic - 型越の魂">Generic - 型越の魂</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-10-27T00:28:05.000Z" title="Created 2025-10-27 08:28:05">2025-10-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">
「靈魂，不屬於肉身；邏輯，也不該屬於型別。」
我們都知道，肉體只是外殼，靈魂才是本質。人如此，程式亦然。
在軟體的世界裡，邏輯就像靈魂，它決定了一段程式「該怎麼思考」；而型別（Type）就像肉體，負責「具體地呈現」



🌸 想解決甚麼問題在泛型出現以前，我們若想讓容器能「存放不同型別」的資料通常會用 object 來實作
1234567ArrayList list = new ArrayList();list.Add(123);list.Add(&quot;ABC&quot;);// 問題來了int n = (int)list[0];     // OKint m = (int)list[1];     // ❌ runtime error

這樣雖然「兼容」了所有型別，但有兩個致命缺點

你要手動轉型 (casting)，而且有風險（可能轉錯）
編譯器無法幫你檢查型別錯誤，只能等執行時爆掉

泛型 (Generics) 是一種「延後決定型別」的程式設計方法，它讓你寫出對型別沒有限制，但仍然安全可重用的程式碼，也就是說在不同型別之間共用邏輯，但又不放棄型別資訊
123List&l ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/10/26/SQL-SQL-%E6%99%82%E9%96%932/" title="SQL - 時の雫"><img class="post-bg" src="https://i.imgur.com/NfCnwwU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL - 時の雫"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/10/26/SQL-SQL-%E6%99%82%E9%96%932/" title="SQL - 時の雫">SQL - 時の雫</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-10-26T03:01:34.000Z" title="Created 2025-10-26 11:01:34">2025-10-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SQL-%E8%81%B7%E5%A0%B4%E6%AD%B7%E9%9A%AA%E8%A8%98/">SQL 職場歷險記</a></span></div><div class="content">
從時間欄位出發 → 做運算或分段 → 推導出狀態或統計結果




💼 三種常見的時間分析模式


類型
說明
範例
關鍵函式



① 時間差模式 (Time Gap)
用「時間差」判斷狀態或剩餘時間
HR 系統判斷誰快退休
DATEDIFF, DATEADD, CASE WHEN


② 時間分群模式 (Time Bucketing)
把連續的時間切成段落來統計
每月、每日、每週銷售分析
MONTH, DATEPART, DATEADD


③ 時間對齊模式 (Time Rounding)
把時間「取整」對齊成標準區間
每分鐘、每小時登入量
DATEADD(DATEDIFF(...))





💼 查詢的共通術式


技術重點
說明



DATEADD &#x2F; DATEDIFF
處理時間偏移與差距（加減天、月、年）


DATEPART &#x2F; MONTH &#x2F; YEAR
擷取時間單位（分群依據）


CASE WHEN
將數值轉成語意化狀態


CTE (WITH)
建立暫存結果，讓查詢更乾淨易讀


分群 (GROUP BY)
對時間區間進行統計彙 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/#content-inner">22</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.imgur.com/q4xr50n.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Allen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">219</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CHI-KEKE"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">世界上總會有一些溫暖的小角落</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/DeepType-Factory-LoggerFactory/" title="LoggerFactory"><img src="https://raw.githubusercontent.com/CHI-KEKE/pics/refs/heads/main/Factory/factory.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LoggerFactory"/></a><div class="content"><a class="title" href="/2026/01/11/DeepType-Factory-LoggerFactory/" title="LoggerFactory">LoggerFactory</a><time datetime="2026-01-11T02:58:05.000Z" title="Created 2026-01-11 10:58:05">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/DeepType-K8S-Command/" title="Cammand"><img src="https://raw.githubusercontent.com/CHI-KEKE/pics/refs/heads/main/Random/Whale.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cammand"/></a><div class="content"><a class="title" href="/2026/01/11/DeepType-K8S-Command/" title="Cammand">Cammand</a><time datetime="2026-01-11T00:47:05.000Z" title="Created 2026-01-11 08:47:05">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/10/DeepType-Cache-Redis-%E5%88%86%E6%95%A3%E5%BC%8F%E6%9E%B6%E6%A7%8B/" title="Redis - 分散式架構（Sharding）"><img src="https://github.com/CHI-KEKE/pics/blob/main/Cache/CacheSql.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis - 分散式架構（Sharding）"/></a><div class="content"><a class="title" href="/2026/01/10/DeepType-Cache-Redis-%E5%88%86%E6%95%A3%E5%BC%8F%E6%9E%B6%E6%A7%8B/" title="Redis - 分散式架構（Sharding）">Redis - 分散式架構（Sharding）</a><time datetime="2026-01-10T15:30:11.000Z" title="Created 2026-01-10 23:30:11">2026-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/10/DeepType-Cache-INCR/" title="Untitled"><img src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"/></a><div class="content"><a class="title" href="/2026/01/10/DeepType-Cache-INCR/" title="Untitled">Untitled</a><time datetime="2026-01-10T03:51:30.919Z" title="Created 2026-01-10 11:51:30">2026-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/05/DeepType-Async-Asynchronous-%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-hot-task/" title="Asynchronous - 第十五章:Host Task"><img src="https://github.com/CHI-KEKE/pics/blob/main/Async/logoAsync.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous - 第十五章:Host Task"/></a><div class="content"><a class="title" href="/2026/01/05/DeepType-Async-Asynchronous-%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-hot-task/" title="Asynchronous - 第十五章:Host Task">Asynchronous - 第十五章:Host Task</a><time datetime="2026-01-05T00:23:05.000Z" title="Created 2026-01-05 08:23:05">2026-01-05</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="View More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C#</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Config/"><span class="card-category-list-name">Config</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Factory/"><span class="card-category-list-name">Factory</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LINQ/"><span class="card-category-list-name">LINQ</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MVC/"><span class="card-category-list-name">MVC</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Others/"><span class="card-category-list-name">Others</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL-%E8%81%B7%E5%A0%B4%E6%AD%B7%E9%9A%AA%E8%A8%98/"><span class="card-category-list-name">SQL 職場歷險記</span><span class="card-category-list-count">11</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/MVC/" style="font-size: 1.22em; color: #999ea4">MVC</a> <a href="/tags/noSQL/" style="font-size: 1.14em; color: #999b9d">noSQL</a> <a href="/tags/Validation/" style="font-size: 1.1em; color: #999">Validation</a> <a href="/tags/Docker/" style="font-size: 1.22em; color: #999ea4">Docker</a> <a href="/tags/Code/" style="font-size: 1.1em; color: #999">Code</a> <a href="/tags/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/" style="font-size: 1.22em; color: #999ea4">程思舞想</a> <a href="/tags/AWS/" style="font-size: 1.1em; color: #999">AWS</a> <a href="/tags/EF-CORE/" style="font-size: 1.5em; color: #99a9bf">EF CORE</a> <a href="/tags/Dependency-Injection/" style="font-size: 1.18em; color: #999ca1">Dependency Injection</a> <a href="/tags/Delegate/" style="font-size: 1.18em; color: #999ca1">Delegate</a> <a href="/tags/JSON/" style="font-size: 1.1em; color: #999">JSON</a> <a href="/tags/Enum/" style="font-size: 1.18em; color: #999ca1">Enum</a> <a href="/tags/%E6%83%85%E5%A0%B1%E3%81%AE%E5%AD%98%E5%9C%A8%E8%AB%96/" style="font-size: 1.38em; color: #99a4b4">情報の存在論</a> <a href="/tags/ThirdParty/" style="font-size: 1.1em; color: #999">ThirdParty</a> <a href="/tags/Serialization/" style="font-size: 1.1em; color: #999">Serialization</a> <a href="/tags/Cache/" style="font-size: 1.18em; color: #999ca1">Cache</a> <a href="/tags/Encode/" style="font-size: 1.22em; color: #999ea4">Encode</a> <a href="/tags/%E6%9E%B6%E6%A7%8B%E3%81%AE%E6%B5%B7%E3%81%AB%E7%81%AF%E3%82%8B%E6%98%9F%E3%84%8B/" style="font-size: 1.1em; color: #999">架構の海に灯る星ㄋ</a> <a href="/tags/C/" style="font-size: 1.3em; color: #99a1ac">C#</a> <a href="/tags/Memory/" style="font-size: 1.1em; color: #999">Memory</a> <a href="/tags/Factory/" style="font-size: 1.1em; color: #999">Factory</a> <a href="/tags/Design/" style="font-size: 1.26em; color: #999fa8">Design</a> <a href="/tags/%E6%9E%B6%E6%A7%8B%E3%81%AE%E6%B5%B7%E3%81%AB%E7%81%AF%E3%82%8B%E6%98%9F/" style="font-size: 1.22em; color: #999ea4">架構の海に灯る星</a> <a href="/tags/Asynchronous-Programming/" style="font-size: 1.46em; color: #99a7bb">Asynchronous Programming</a> <a href="/tags/Http/" style="font-size: 1.3em; color: #99a1ac">Http</a> <a href="/tags/System-Text-Json/" style="font-size: 1.1em; color: #999">System.Text.Json</a> <a href="/tags/Config/" style="font-size: 1.18em; color: #999ca1">Config</a> <a href="/tags/LINQ/" style="font-size: 1.42em; color: #99a6b7">LINQ</a> <a href="/tags/Tools/" style="font-size: 1.14em; color: #999b9d">Tools</a> <a href="/tags/WebAPI/" style="font-size: 1.42em; color: #99a6b7">WebAPI</a> <a href="/tags/Plugin-Pattern%EF%BC%88%E5%A4%96%E6%8E%9B%E6%A8%A1%E5%BC%8F%EF%BC%89x-Factory-Method-Pattern%EF%BC%88%E5%B7%A5%E5%BB%A0%E6%96%B9%E6%B3%95%EF%BC%89x-Strategy-Pattern%EF%BC%88%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%EF%BC%89/" style="font-size: 1.1em; color: #999">Plugin Pattern（外掛模式）x Factory Method Pattern（工廠方法）x Strategy Pattern（策略模式）</a> <a href="/tags/%E8%92%BC%E3%81%8D%E7%9B%BE/" style="font-size: 1.34em; color: #99a3b0">蒼き盾</a> <a href="/tags/Delegate-x-Observer-Pattern/" style="font-size: 1.1em; color: #999">Delegate x Observer Pattern</a> <a href="/tags/SOLID/" style="font-size: 1.1em; color: #999">SOLID</a> <a href="/tags/Server/" style="font-size: 1.1em; color: #999">Server</a> <a href="/tags/Newtonsoft-Json/" style="font-size: 1.1em; color: #999">Newtonsoft.Json</a> <a href="/tags/%E6%80%9D%E7%B4%A2%E6%97%A5%E5%92%8C/" style="font-size: 1.26em; color: #999fa8">思索日和</a> <a href="/tags/WebAPI/" style="font-size: 1.1em; color: #999">WebAPI -</a> <a href="/tags/SQL-%E8%81%B7%E5%A0%B4%E6%AD%B7%E9%9A%AA%E8%A8%98/" style="font-size: 1.22em; color: #999ea4">SQL 職場歷險記</a> <a href="/tags/%E9%A2%A8%E9%9F%B3%E5%AD%90/" style="font-size: 1.1em; color: #999">風音子</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="View More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/01/"><span class="card-archive-list-date">January 2026</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">December 2025</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">November 2025</span><span class="card-archive-list-count">33</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">October 2025</span><span class="card-archive-list-count">37</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">September 2025</span><span class="card-archive-list-count">33</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">August 2025</span><span class="card-archive-list-count">17</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">219</div></div><div class="webinfo-item"><div class="item-name">Runtime :</div><div class="item-count" id="runtimeshow" data-publishDate="2024-03-01T10:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2026-01-14T14:36:57.245Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.imgur.com/yZlXwed.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2026 By Allen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">What you'll find out there is boundless freedom !</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>