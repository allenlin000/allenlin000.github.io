<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>平屋慢生活 - Coding也是生活的溫暖調味</title><meta name="author" content="Allen"><meta name="copyright" content="Allen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="平屋慢生活">
<meta property="og:url" content="https://allenlin000.github.io.git/page/16/">
<meta property="og:site_name" content="平屋慢生活">
<meta property="og:locale">
<meta property="og:image" content="https://i.imgur.com/q4xr50n.png">
<meta property="article:author" content="Allen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/q4xr50n.png"><link rel="shortcut icon" href="/img/kiwibird.png"><link rel="canonical" href="https://allenlin000.github.io.git/page/16/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '平屋慢生活',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-12-16 23:07:56'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.imgur.com/q4xr50n.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">215</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">24</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://i.imgur.com/86eENHu.png')"><nav id="nav"><span id="blog-info"><a href="/" title="平屋慢生活"><span class="site-name">平屋慢生活</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">平屋慢生活</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/23/EFCORE-Dapper/" title="Dapper vs EF Core"><img class="post-bg" src="/images/ocean.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dapper vs EF Core"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/23/EFCORE-Dapper/" title="Dapper vs EF Core">Dapper vs EF Core</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-23T14:07:05.000Z" title="Created 2025-05-23 22:07:05">2025-05-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%B3%87%E6%96%99%E7%96%86%E7%95%8C%E7%9A%84%E8%88%AA%E5%9C%96/">資料疆界的航圖</a></span></div><div class="content">




如果資料存取是場人生選擇，那 EF Core 就像「全包式旅行團」：行李、住宿、行程幫你安排好，你只要準時上車；而 Dapper 則像「背包客自由行」：想去哪、怎麼走、要不要迷路，全靠你自己。

在 .NET 的世界裡，EF Core 與 Dapper 是資料存取的兩大門派，一個幫你包辦大小事，一個讓你操控每一行 SQL。
你可能常常陷入這種掙扎：
「欸現在這隻微服務要查一堆訂單、明細、客戶資料，我要不要用 EF？還是會變龜速大怪獸？」「有三層關聯欸，用 Dapper 要手動 map 到哭出來，欄位一多手都斷了吧…」


🌊 ORM

在開發應用程式時，資料通常儲存在資料庫（Database）中，而程式則是用物件（Object）在操作資料。但是資料庫與程式是兩種世界

資料庫用的是「表格」（table）來存資料，C# 用的是「物件」和「類別」

這兩個東西的結構不同、語言不同、邏輯也不同。


👉 ORM（Object-Relational Mapping）本質是什麼？

它是一座橋梁，幫你自動把「資料表」轉成「物件」，也幫你把你操作的物件轉回資料表格式，這個過程就叫做  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/20/EFCORE-NEW-EFCORE-Scoped-md/" title="EF Core - DbContext 生命週期"><img class="post-bg" src="https://github.com/CHI-KEKE/pics/blob/main/EF/ocean.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="EF Core - DbContext 生命週期"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/20/EFCORE-NEW-EFCORE-Scoped-md/" title="EF Core - DbContext 生命週期">EF Core - DbContext 生命週期</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-20T07:28:05.000Z" title="Created 2025-05-20 15:28:05">2025-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%B3%87%E6%96%99%E7%96%86%E7%95%8C%E7%9A%84%E8%88%AA%E5%9C%96/">資料疆界的航圖</a></span></div><div class="content">




「這裡的風很大，請小心 DbContext 被吹出作用域。」

開發 ASP.NET Core 應用程式時，你一定碰過這段設定
1services.AddDbContext&lt;MyDbContext&gt;();
這一行註冊你的 DbContext，但你知道它的 生命週期（Lifetime）是什麼嗎？Scoped、Transient 差在哪？又該怎麼選擇？今天我們就來一趟資料庫生命週期的航行。
🌊 EF Core 的預設生命週期：ScopedEntity Framework contexts

By default, Entity Framework contexts are added to the service container using the    scoped lifetime because web app database operations are normally scoped to the client request.

簡單來說，EF Core 的 DbContext 預設會註冊成 Scoped，也就是，每個 HTTP Request 會 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/19/EFCORE-NEW-EFCORE-Transaction-md/" title="EF Core - Transaction"><img class="post-bg" src="https://github.com/CHI-KEKE/pics/blob/main/EF/ocean.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="EF Core - Transaction"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/19/EFCORE-NEW-EFCORE-Transaction-md/" title="EF Core - Transaction">EF Core - Transaction</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-19T14:07:05.000Z" title="Created 2025-05-19 22:07:05">2025-05-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%B3%87%E6%96%99%E7%96%86%E7%95%8C%E7%9A%84%E8%88%AA%E5%9C%96/">資料疆界的航圖</a></span></div><div class="content">



🐧關於 Transaction在系統開發中，最可怕的狀況不是資料存不進去，而是「資料只成功了一半」。
你可能會覺得沒什麼——多一筆少一筆資料，好像影響不大。但實際上，這種「半成品」的狀態，才是造成系統錯誤與災難的根源。

使用者下單成功了，庫存卻沒扣 → 超賣
客戶付款完成，但系統沒記帳 → 客訴、查帳風暴
發票開出來了，卻沒連到訂單 → 財報對不起來

這些問題不是 bug，也不是 crash，而是資料邏輯不一致，讓系統表面正常、實際混亂。這時候，就需要一種「全部成功或全部失敗」的保護機制 —— 這就是 交易（Transaction） 的存在價值。
交易就像你畫圖時的一顆橡皮擦：如果中間畫錯了，可以整張擦掉重來，而不是留下殘破不堪的塗鴉。
Using Transactions


🌊 SaveChanges() 自動包成 Transaction在 EF Core 中，只要你呼叫 SaveChanges() 或 SaveChangesAsync()，它就會自動包一個隱含的交易（Implicit Transaction）。這代表：
1234567using (var cont ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/18/NEW-DependencyInjection-5/" title="Dependency Injection - EF Core DbContext"><img class="post-bg" src="https://i.imgur.com/xAbpKgd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dependency Injection - EF Core DbContext"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/18/NEW-DependencyInjection-5/" title="Dependency Injection - EF Core DbContext">Dependency Injection - EF Core DbContext</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-18T04:07:05.000Z" title="Created 2025-05-18 12:07:05">2025-05-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">Constructor injection behavior
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/13/NEW-DependencyInjection-7/" title="Dependency Injection - 測試"><img class="post-bg" src="https://i.imgur.com/xAbpKgd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dependency Injection - 測試"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/13/NEW-DependencyInjection-7/" title="Dependency Injection - 測試">Dependency Injection - 測試</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-13T14:07:05.000Z" title="Created 2025-05-13 22:07:05">2025-05-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">測試to Feng，這篇介紹 Autofac 觀念的文章 https://blog.darkthread.net/blog/autofac-notes-1/ ，有舉了一個範例，在完全不修改主要程式的情況下抽換不同功能的元件。如果要做單元測試，這超級重要。
例如：某個依賴 WebApi 提供內容的函式，單元測試期間需模擬不同 WebAPI 傳回結果，此時可透過 DI 將 WebAPI 服務元抽換成假元件傳回特定值以驗證不同狀況下邏輯正確。範例：https://blog.darkthread.net/blog/aspnet-core-di-practice/
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/02/NEW-High-Availibility-HA/" title="Untitled"><img class="post-bg" src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/02/NEW-High-Availibility-HA/" title="Untitled">Untitled</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-05-02T01:17:07.478Z" title="Created 2025-05-02 09:17:07">2025-05-02</time></span></div><div class="content">HA（High Availability，高可用性）
HA 之前，先搞懂 Stateful vs Stateless✅ Stateless component 是什麼？像是：Application Server（AS）&#x2F; Nginx
特性是：不會保存任何「狀態」（state），也就是沒有 session、使用者資料、執行進度這些。
所以它可以橫向擴充（scale out）非常容易，想加幾台就加幾台，反正大家都是 stateless。
如何維持 HA（高可用）？
靠 heartbeat（心跳）機制判斷哪台死掉。
有問題就換台 server 接手即可。
✅ Stateful component 是什麼？像是：PostgreSQL &#x2F; Kafka &#x2F; RabbitMQ
這類會保存狀態資料，例如資料庫內的使用者資料、訊息佇列的訊息等。
所以要維持 HA，比起 stateless 難很多，因為 state 不能亂丟、不能亂同步。
 二、Redis 是什麼？Stateless 嗎？如果 Redis 只是做 caching（快取），就可以當作 stateless 看待（ ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/04/03/86-%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%88%B0%E5%8D%80%E8%A7%80%E5%BD%B1%E5%BF%83%E5%BE%97/" title="86 不存在的戰區 - 請為自己努力活過而感到驕傲"><img class="post-bg" src="https://i.imgur.com/NUblcQu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="86 不存在的戰區 - 請為自己努力活過而感到驕傲"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/04/03/86-%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%88%B0%E5%8D%80%E8%A7%80%E5%BD%B1%E5%BF%83%E5%BE%97/" title="86 不存在的戰區 - 請為自己努力活過而感到驕傲">86 不存在的戰區 - 請為自己努力活過而感到驕傲</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2025-04-03T08:37:34.000Z" title="Created 2025-04-03 16:37:34">2025-04-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BD%9C%E5%93%81%E9%91%91%E8%B3%9E/">作品鑑賞</a></span></div><div class="content">
前言人在前進時，時常懷疑自我價值在挫折之中，容易陷入內心的拉扯與消耗彷彿眼前的陰影遮蔽了過往一路走來的堅持與努力曾經一步一腳印走過的路，如今竟變得模糊不清。
蕾娜曾對辛耶說過


&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;想要戰鬥到底、想要活到最後，現在才能在這裡
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;我想，你可以更為此感到驕傲



故事大綱故事以戰火連天的前線作為開場，硝煙瀰漫、砲火轟鳴，大火照亮了那群平均年齡不到 20 歲的年輕士兵臉龐。然而，真正令人不寒而慄的，並非戰場本身，而是那冰冷無情且毫無人性的聲音，他透過通訊設備，不斷以侮辱與命令鞭策著這群尚未成年便踏入戰場的孩子…
就在我們尚未從戰爭的殘酷中回神，鏡頭一轉，卻進入另外一個不同的世界 – 溫柔清晨的陽光灑落在潔白的床連與床鋪上，共和國的居民在柔軟的被窩中悠悠醒來，伴隨著古典音樂的樂聲享用早餐，一切顯得如此安詳、那麼的理所當然、前線與後方之間的鴻溝，在這一瞬間顯得如此殘酷而荒謬
這不正是現實的倒影嗎？一場冠冕堂皇之下，悄然 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/12/14/DeepType-SQL-Thinking-Pagination/" title="Pagination"><img class="post-bg" src="https://i.imgur.com/NfCnwwU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pagination"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/12/14/DeepType-SQL-Thinking-Pagination/" title="Pagination">Pagination</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-12-14T03:49:34.000Z" title="Created 2024-12-14 11:49:34">2024-12-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%83%85%E5%A0%B1%E3%81%AE%E5%AD%98%E5%9C%A8%E8%AB%96/">情報の存在論</a></span></div><div class="content">照著進度走的人生OFFSET / FETCH程式端 VS Stored ProcedureOFFSET 實現分頁的效能問題「鍵值分頁（Keyset Pagination）」優化Keyset Pagination 真的是「萬能解法」嗎如果資料在分頁期間被新增或刪除，OFFSET 與 Keyset 哪個更安全世界是一整本書，人生可以被清楚地切成第 1 頁、第 2 頁、第 50 頁，我只要照著頁碼翻，就一定能看到我該看到的那一段，對應到人生，這像是 30 歲要做到第 30 頁、35 歲要結婚、40 歲要買房，同齡的人都在第 20 頁，我怎麼還在第 15 頁？你的人生座標來自「別人在哪一頁」，這就是 OFFSET FETCH
OFFSET 有一個隱藏的問題，世界不是靜止的書，有人中途離場（刪資料）、有人突然插隊（新增資料），頁碼沒有錯，但內容已經變了，明明我照順序走，卻發現自己重複經歷同樣的痛苦或莫名其妙錯過一些重要的東西，OFFSET 的人生，不只是慢，而是容易迷失在比較與對齊之中。但是不是 OFFSET 不好，而是你不能一直用 OFFSET 活著!
Keyset 的世界觀就完全不同，我不管 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/11/24/%E5%8F%96%E5%BE%97%E7%B3%BB%E7%B5%B1%E8%B3%87%E8%A8%8A/" title="取得系統資訊"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="取得系統資訊"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/11/24/%E5%8F%96%E5%BE%97%E7%B3%BB%E7%B5%B1%E8%B3%87%E8%A8%8A/" title="取得系統資訊">取得系統資訊</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-11-24T03:24:09.000Z" title="Created 2024-11-24 11:24:09">2024-11-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Others/">Others</a></span></div><div class="content">Process.GetProcesses() 範圍並不限於應用程式本身，它會返回系統中所有正在執行的 Process 資訊，這包括其他應用程式、系統服務以及其他使用者的 Process，但具體可見的範圍可能受到權限的限制。
WorkingSet64 是 Process 的實際記憶體使用量（物理記憶體），數值為 bytes。
Lambda Expression 應用 - TotalMemory簡單來說就是在方法呼叫端傳入我們的條件 (像是傳入一個 Where 一樣)，來決定內部的計算邏輯範圍
這個實作情境是這樣，使用 Process.GetProcesses() 取得所有 Process，並且篩選 &gt; 20 MB 的 Process，最後計算前兩名的資訊
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354void Main()&#123;	DisplayMemory(memory =&gt; memory &gt; 20 * 1024  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/11/24/CSHARP-lambdaExpression/" title="LambdaExpression"><img class="post-bg" src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LambdaExpression"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/11/24/CSHARP-lambdaExpression/" title="LambdaExpression">LambdaExpression</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-11-24T03:24:09.000Z" title="Created 2024-11-24 11:24:09">2024-11-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/">程思舞想</a></span></div><div class="content">
🌿 Lambda 的誕生：從 Delegate 到優雅的表達式在 C# 的世界裡，Lambda 表達式（Lambda Expression） 並不是從天而降的魔法。它的根基，其實建立在一個更早、更樸實的概念上 : delegate


Delegate：型別安全的 Callback所謂 Callback（回呼），是一種「把方法當作參數傳遞」的設計方式。舉個例子，假設你想在任務完成後執行一段通知程式：
12345void DownloadFile(string url, Action onCompleted)&#123;    Console.WriteLine($&quot;Downloading &#123;url&#125;...&quot;);    onCompleted(); // 任務完成後回呼&#125;

這裡的 onCompleted 就是「回呼方法」，而在 C# 中，這種 callback 能夠安全運作的關鍵就是 delegate
而 Lambda 表達式，更是進一步，它是「匿名的 delegate」，讓我們能更簡潔地撰寫任務完成後執行的函式



🌸 Exp ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/15/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/#content-inner">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/#content-inner">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/#content-inner">22</a><a class="extend next" rel="next" href="/page/17/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.imgur.com/q4xr50n.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Allen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">215</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CHI-KEKE"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">世界上總會有一些溫暖的小角落</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/14/%E8%B3%87%E5%AE%89-fe/" title="Untitled"><img src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"/></a><div class="content"><a class="title" href="/2025/12/14/%E8%B3%87%E5%AE%89-fe/" title="Untitled">Untitled</a><time datetime="2025-12-14T07:03:50.572Z" title="Created 2025-12-14 15:03:50">2025-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/DeepType-SQL-Thinking-Pre-filtering-Post-filtering/" title="Pre-filtering vs. Post-filtering"><img src="https://i.imgur.com/NfCnwwU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pre-filtering vs. Post-filtering"/></a><div class="content"><a class="title" href="/2025/12/10/DeepType-SQL-Thinking-Pre-filtering-Post-filtering/" title="Pre-filtering vs. Post-filtering">Pre-filtering vs. Post-filtering</a><time datetime="2025-12-10T00:13:34.000Z" title="Created 2025-12-10 08:13:34">2025-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/06/DeepType-SQL-Thinking-IsolationLevel-1/" title="ReadUncommitted and SnapShot"><img src="https://i.imgur.com/NfCnwwU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ReadUncommitted and SnapShot"/></a><div class="content"><a class="title" href="/2025/12/06/DeepType-SQL-Thinking-IsolationLevel-1/" title="ReadUncommitted and SnapShot">ReadUncommitted and SnapShot</a><time datetime="2025-12-05T16:09:34.000Z" title="Created 2025-12-06 00:09:34">2025-12-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/30/Async-HOT-TASK/" title="Untitled"><img src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"/></a><div class="content"><a class="title" href="/2025/11/30/Async-HOT-TASK/" title="Untitled">Untitled</a><time datetime="2025-11-30T02:13:31.164Z" title="Created 2025-11-30 10:13:31">2025-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/30/IO-AWS-S3/" title="Untitled"><img src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Untitled"/></a><div class="content"><a class="title" href="/2025/11/30/IO-AWS-S3/" title="Untitled">Untitled</a><time datetime="2025-11-30T02:03:10.445Z" title="Created 2025-11-30 10:03:10">2025-11-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="View More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C#</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Config/"><span class="card-category-list-name">Config</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LINQ/"><span class="card-category-list-name">LINQ</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MVC/"><span class="card-category-list-name">MVC</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Others/"><span class="card-category-list-name">Others</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL-%E8%81%B7%E5%A0%B4%E6%AD%B7%E9%9A%AA%E8%A8%98/"><span class="card-category-list-name">SQL 職場歷險記</span><span class="card-category-list-count">11</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Server/"><span class="card-category-list-name">Server</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/WebAPI/"><span class="card-category-list-name">WebAPI</span><span class="card-category-list-count">13</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/%E6%9E%B6%E6%A7%8B%E3%81%AE%E6%B5%B7%E3%81%AB%E7%81%AF%E3%82%8B%E6%98%9F/" style="font-size: 1.22em; color: #999ea4">架構の海に灯る星</a> <a href="/tags/Serialization/" style="font-size: 1.1em; color: #999">Serialization</a> <a href="/tags/Design/" style="font-size: 1.26em; color: #999fa8">Design</a> <a href="/tags/Tools/" style="font-size: 1.14em; color: #999b9d">Tools</a> <a href="/tags/MVC/" style="font-size: 1.22em; color: #999ea4">MVC</a> <a href="/tags/%E6%80%9D%E7%B4%A2%E6%97%A5%E5%92%8C/" style="font-size: 1.22em; color: #999ea4">思索日和</a> <a href="/tags/Http/" style="font-size: 1.3em; color: #99a1ac">Http</a> <a href="/tags/Encode/" style="font-size: 1.22em; color: #999ea4">Encode</a> <a href="/tags/AWS/" style="font-size: 1.1em; color: #999">AWS</a> <a href="/tags/%E7%A8%8B%E6%80%9D%E8%88%9E%E6%83%B3/" style="font-size: 1.22em; color: #999ea4">程思舞想</a> <a href="/tags/SQL-%E8%81%B7%E5%A0%B4%E6%AD%B7%E9%9A%AA%E8%A8%98/" style="font-size: 1.22em; color: #999ea4">SQL 職場歷險記</a> <a href="/tags/System-Text-Json/" style="font-size: 1.1em; color: #999">System.Text.Json</a> <a href="/tags/C/" style="font-size: 1.3em; color: #99a1ac">C#</a> <a href="/tags/EF-CORE/" style="font-size: 1.5em; color: #99a9bf">EF CORE</a> <a href="/tags/JSON/" style="font-size: 1.1em; color: #999">JSON</a> <a href="/tags/%E9%A2%A8%E9%9F%B3%E5%AD%90/" style="font-size: 1.1em; color: #999">風音子</a> <a href="/tags/Memory/" style="font-size: 1.1em; color: #999">Memory</a> <a href="/tags/%E8%B3%87%E6%96%99%E7%96%86%E7%95%8C%E7%9A%84%E8%88%AA%E5%9C%96/" style="font-size: 1.26em; color: #999fa8">資料疆界的航圖</a> <a href="/tags/ThirdParty/" style="font-size: 1.1em; color: #999">ThirdParty</a> <a href="/tags/WebAPI/" style="font-size: 1.42em; color: #99a6b7">WebAPI</a> <a href="/tags/LINQ/" style="font-size: 1.42em; color: #99a6b7">LINQ</a> <a href="/tags/%E8%92%BC%E3%81%8D%E7%9B%BE/" style="font-size: 1.34em; color: #99a3b0">蒼き盾</a> <a href="/tags/%E6%83%85%E5%A0%B1%E3%81%AE%E5%AD%98%E5%9C%A8%E8%AB%96/" style="font-size: 1.38em; color: #99a4b4">情報の存在論</a> <a href="/tags/Enum/" style="font-size: 1.18em; color: #999ca1">Enum</a> <a href="/tags/Delegate/" style="font-size: 1.18em; color: #999ca1">Delegate</a> <a href="/tags/Newtonsoft-Json/" style="font-size: 1.1em; color: #999">Newtonsoft.Json</a> <a href="/tags/SOLID/" style="font-size: 1.1em; color: #999">SOLID</a> <a href="/tags/Code/" style="font-size: 1.1em; color: #999">Code</a> <a href="/tags/noSQL/" style="font-size: 1.14em; color: #999b9d">noSQL</a> <a href="/tags/WebAPI/" style="font-size: 1.1em; color: #999">WebAPI -</a> <a href="/tags/Dependency-Injection/" style="font-size: 1.18em; color: #999ca1">Dependency Injection</a> <a href="/tags/Validation/" style="font-size: 1.1em; color: #999">Validation</a> <a href="/tags/Asynchronous-Programming/" style="font-size: 1.46em; color: #99a7bb">Asynchronous Programming</a> <a href="/tags/Server/" style="font-size: 1.18em; color: #999ca1">Server</a> <a href="/tags/Cache/" style="font-size: 1.22em; color: #999ea4">Cache</a> <a href="/tags/Config/" style="font-size: 1.18em; color: #999ca1">Config</a> <a href="/tags/Delegate-x-Observer-Pattern/" style="font-size: 1.1em; color: #999">Delegate x Observer Pattern</a> <a href="/tags/Plugin-Pattern%EF%BC%88%E5%A4%96%E6%8E%9B%E6%A8%A1%E5%BC%8F%EF%BC%89x-Factory-Method-Pattern%EF%BC%88%E5%B7%A5%E5%BB%A0%E6%96%B9%E6%B3%95%EF%BC%89x-Strategy-Pattern%EF%BC%88%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%EF%BC%89/" style="font-size: 1.1em; color: #999">Plugin Pattern（外掛模式）x Factory Method Pattern（工廠方法）x Strategy Pattern（策略模式）</a> <a href="/tags/%E6%9E%B6%E6%A7%8B%E3%81%AE%E6%B5%B7%E3%81%AB%E7%81%AF%E3%82%8B%E6%98%9F%E3%84%8B/" style="font-size: 1.1em; color: #999">架構の海に灯る星ㄋ</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="View More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">December 2025</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">November 2025</span><span class="card-archive-list-count">39</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">October 2025</span><span class="card-archive-list-count">37</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">September 2025</span><span class="card-archive-list-count">33</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">August 2025</span><span class="card-archive-list-count">17</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><span class="card-archive-list-count">16</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">215</div></div><div class="webinfo-item"><div class="item-name">Runtime :</div><div class="item-count" id="runtimeshow" data-publishDate="2024-03-01T10:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-12-16T15:07:55.623Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.imgur.com/yZlXwed.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Allen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">What you'll find out there is boundless freedom !</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>