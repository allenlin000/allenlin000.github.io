<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>平屋慢生活 - Coding也是生活的溫暖調味</title><meta name="author" content="Allen"><meta name="copyright" content="Allen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="平屋慢生活">
<meta property="og:url" content="https://allenlin000.github.io.git/page/2/">
<meta property="og:site_name" content="平屋慢生活">
<meta property="og:locale">
<meta property="og:image" content="https://i.imgur.com/q4xr50n.png">
<meta property="article:author" content="Allen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/q4xr50n.png"><link rel="shortcut icon" href="/img/kiwibird.png"><link rel="canonical" href="https://allenlin000.github.io.git/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '平屋慢生活',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-12-22 11:31:23'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.imgur.com/q4xr50n.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://i.imgur.com/86eENHu.png')"><nav id="nav"><span id="blog-info"><a href="/" title="平屋慢生活"><span class="site-name">平屋慢生活</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">平屋慢生活</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/10/03/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%869/" title="Asynchronous Programming (九. 不是任何運算用 ThreadPool 執行都會加速)"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous Programming (九. 不是任何運算用 ThreadPool 執行都會加速)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/03/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%869/" title="Asynchronous Programming (九. 不是任何運算用 ThreadPool 執行都會加速)">Asynchronous Programming (九. 不是任何運算用 ThreadPool 執行都會加速)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-10-03T09:55:05.000Z" title="Created 2024-10-03 17:55:05">2024-10-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">https://blog.darkthread.net/blog/multicore-1/
這篇文章的主旨是，多執行緒切換的機制與建立是有代價的，因此當工作本身並不複雜時，機制的成本便會壓過多工產生的效益。
實作現在按照網站提供的例子改寫成較現代的實作
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849const int TIMES = 10_000_000;const int ROUNDS = 5;for(int round = 0;round &lt; ROUNDS;round++)&#123;    Console.WriteLine($&quot;Round &#123;round + 1&#125;&quot;);    // Single Thread    var singleThreadTime = MeasureTime(() =&gt;    &#123;        for (int i = 0; i &lt;TIMES;i++)    ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/10/01/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%867/" title="Asynchronous Programming (七. Thread Pool &amp; 什麼時候要自行建立執行緒)"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous Programming (七. Thread Pool &amp; 什麼時候要自行建立執行緒)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/01/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%867/" title="Asynchronous Programming (七. Thread Pool &amp; 什麼時候要自行建立執行緒)">Asynchronous Programming (七. Thread Pool &amp; 什麼時候要自行建立執行緒)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-10-01T01:08:05.000Z" title="Created 2024-10-01 09:08:05">2024-10-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">想了解 .NET 的執行緒概念，免不了要認識 .NET CLR 執行緒管理的機制 Thread Pool
初步認識我們嘗試先用一個生活上的比喻相關的詞彙之間彼此的關係
ThreadPool : 大型快遞公司的配送中心Threads (執行緒) : 配送員Tasks : 包裹
首先，配送中心有一定數量的配送員，這些配送員隨時待命，準備送貨。每個需要執行的任務就像一個待配送的包裹。當有新包裹到達時，會被放入待配送區（任務隊列），空閒的配送員會從待配送區取走包裹進行配送。
在配送高峰期（出現大量任務時），公司會臨時僱用更多配送員，類似於 ThreadPool 在需要時建立額外的執行緒，但公司不會無限制地僱用配送員，有一個最大數量限制
配送完成後，配送員返回中心等待下一個包裹，而不是每次都僱用新的配送員，就像 ThreadPool 重用執行緒，而不是每次都創建新的執行緒
在配送淡季，公司會減少配送員數量以節省成本，就如同 ThreadPool 會在執行緒長時間空閒時逐漸減少其數量。
但對於特殊包裹（如大件物品），公司可能會安排專門的配送員。這類似於在某些情況下，開發者可能選擇建立自定義執行緒而 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/26/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%866/" title="Asynchronous Programming (六. 執行緒的發展與概念筆記)"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous Programming (六. 執行緒的發展與概念筆記)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/26/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%866/" title="Asynchronous Programming (六. 執行緒的發展與概念筆記)">Asynchronous Programming (六. 執行緒的發展與概念筆記)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-26T01:22:05.000Z" title="Created 2024-09-26 09:22:05">2024-09-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">作為軟體工程師，了解執行緒的概念和工作原理是一個必修課。因為這涉及到怎麼提高應用程式效能，了解執行緒可以幫助我們設計出更高效的應用程式，避免過度消耗 CPU 或記憶體，這涉及並行計算、同時處理多個獨立任務等，我們可以編寫能充分利用這些硬體資源的程式藉以提高響應性，在處理耗時任務時，使用執行緒可以保持用戶界面的響應能力，在診斷和解決與並行相關的問題，如死鎖、競爭條件時也會有所幫助
整理內容來自huanlintalk : https://www.huanlintalk.com/2013/04/csharp-notes-multithreading-1.html莫力全 Kyle Mo :https://oldmo860617.medium.com/Program,Process,Thread : https://programming.im.ncnu.edu.tw/J_Chapter9.htm青耀隨筆談 : https://qing-yao.blogspot.com/2016/08/writeByMind-2.html?source=post_page-----94a40721b492--- ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/22/APIKey-Protected/" title=".NET CORE 環境變數"><img class="post-bg" src="https://i.imgur.com/nQ2Epa9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt=".NET CORE 環境變數"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/22/APIKey-Protected/" title=".NET CORE 環境變數">.NET CORE 環境變數</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-22T02:24:34.000Z" title="Created 2024-09-22 10:24:34">2024-09-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">將 APIKey 存進環境變數參考 : https://blog.darkthread.net/blog/secure-apikey-for-console-app/
1234567891011121314151617181920212223242526byte[] additionalEntropy = &#123; 9, 8, 7, 6, 5 &#125;;Func&lt;string, string&gt; GetSecureEnvVar = (varName) =&gt; &#123;    var val = Environment.GetEnvironmentVariable(varName, EnvironmentVariableTarget.User);    if (!string.IsNullOrEmpty(val))    &#123;        try        &#123;            val = Encoding.UTF8.GetString(                ProtectedData.Unprotect(Convert.F ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/22/SQL-Injection/" title="SQL Injection"><img class="post-bg" src="https://i.imgur.com/f2eWUWv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL Injection"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/22/SQL-Injection/" title="SQL Injection">SQL Injection</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-22T02:24:34.000Z" title="Created 2024-09-22 10:24:34">2024-09-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SQL/">SQL</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/02/ORM-1/" title="ORM (一. EntityFrameWork 之 AsNoTracking)"><img class="post-bg" src="https://i.imgur.com/2a0LNQx.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ORM (一. EntityFrameWork 之 AsNoTracking)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/02/ORM-1/" title="ORM (一. EntityFrameWork 之 AsNoTracking)">ORM (一. EntityFrameWork 之 AsNoTracking)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-02T10:10:05.000Z" title="Created 2024-09-02 18:10:05">2024-09-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content"> 一直以來常有建議說 EF 的 Best Practice 是，當我們單純讀取資料庫時，想要提升效能必須加上 .AsNoTracking()，也就是告訴 Entity Framework 不要追蹤查詢結果中的實體
 但實際上一個查詢背後做了甚麼事情呢? 
 讓我們導讀這一篇文章: https://www.thereformedprogrammer.net/ef-core-in-depth-what-happens-when-ef-core-reads-from-the-database/#2-asnotracking-query-read-only-query
what happens when EF Core reads from the database?當然，得先談談 EF Core 是怎麼讀取資料庫的

首先，我們在 EF 寫了一段 LINQ 後，會經過 LINQ Query Translation 轉成 DB commands，接著經過 Database Provider，例如 SQLite 讀取資料
123456var books = context.Books    .I ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/01/%E6%9E%B6%E6%A7%8B%E5%9C%96-UML/" title="UML"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UML"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/01/%E6%9E%B6%E6%A7%8B%E5%9C%96-UML/" title="UML">UML</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-01T03:39:05.000Z" title="Created 2024-09-01 11:39:05">2024-09-01</time></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/09/01/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%86-5/" title="Asynchronous Programming (五. 使用非同步時的 Deadlock 問題)"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous Programming (五. 使用非同步時的 Deadlock 問題)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/09/01/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%86-5/" title="Asynchronous Programming (五. 使用非同步時的 Deadlock 問題)">Asynchronous Programming (五. 使用非同步時的 Deadlock 問題)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-09-01T01:20:05.000Z" title="Created 2024-09-01 09:20:05">2024-09-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">背景最近較積極在研究非同步寫法可能帶來的問題，逛到兩篇差不多的內容:
傳說中的 async deadlock :https://abstreamace.com/sglab/2020/06/11/%E8%B8%A9%E5%9D%91%E8%A8%98%EF%BC%9A%E5%82%B3%E8%AA%AA%E4%B8%AD%E7%9A%84-async-deadlock/
await 與 Task.Result&#x2F;Task.Wait () 的 Deadlock 問題 :https://blog.darkthread.net/blog/await-task-block-deadlock/
因為對於非同步機制的背後運作機理不熟，因此感到好奇，是只有在 MVC Controller 這樣寫才會遇到嗎? 還是一般在寫 Console, WebAPI … 等也可能會遇到呢?
先來練習模仿一下這個實驗
模仿實驗1234567891011121314151617181920212223public class HomeController : Controller&#123;	private r ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/31/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%86-4/" title="Asynchronous Programming (四. .Result / .Wait / .GetAwaiter)"><img class="post-bg" src="https://i.imgur.com/ptNmOOD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Asynchronous Programming (四. .Result / .Wait / .GetAwaiter)"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/31/%E7%95%B0%E6%AD%A5%E8%99%95%E7%90%86-4/" title="Asynchronous Programming (四. .Result / .Wait / .GetAwaiter)">Asynchronous Programming (四. .Result / .Wait / .GetAwaiter)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-31T02:03:05.000Z" title="Created 2024-08-31 10:03:05">2024-08-31</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">背景有時候我們會用要 “等待某個任務執行完畢才往後走” 但 “外部呼叫方法是同步而非同步的方法” 的狀況，就會有幾個選項 例如 : .Result, .Wait(), .GetAwaiter() 的用法，但選用時有個重點要考慮進來，那就是 “錯誤回傳機制”，現在我模仿黑暗執行緒的實驗也實作一次看看。
參考 : https://blog.darkthread.net/blog/getawaiter-getresult-vs-result/
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667static void Main()&#123;	TestSip(&quot;Wait&quot;, () =&gt; &#123;		SumulateDatabaseConnectionAsync().Wait();	&#125;);	TestSip(&quot;Result&quot;, () =&gt ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/27/aws-cloudfront/" title="CloudFront"><img class="post-bg" src="https://i.imgur.com/ayE9tp1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CloudFront"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/27/aws-cloudfront/" title="CloudFront">CloudFront</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2024-08-26T16:00:00.000Z" title="Created 2024-08-27 00:00:00">2024-08-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C-%E8%88%9E%E6%83%B3/">C# 舞想</a></span></div><div class="content">CloudFront 就是 AWS 在全球各地設置了許多 Server，稱為 edge locations，這些 Server 可能存了網站的副本內容（如圖片、影片、網頁…等）。當使用者訪問網站時，他們會從最近的邊緣位置獲取內容，台灣雖然不是 AZ (Availability Zones) 但也設有 edge location!


幾個重要的名詞解釋Origin：
所有的原始文件（如圖片、影片、網頁等）都存放在這裡可以是 Amazon S3 存儲桶、EC2 伺服器，或者是由多台 EC2 伺服器組成的負載均衡系統
Edge Server：
這些就像是分布在世界各地的小型倉庫它們儲存源站內容的副本當用戶請求內容時，如果 Edge Server 有該內容，就直接提供如果沒有，就會向 Origin 請求，然後儲存並提供給用戶
Distribution：
這是 CDN 服務的入口點。就像是一個智能導航系統。當用戶訪問網站時，這個系統會自動將他們引導到最近的 Edge Server
Web Distribution：
這是專門為網站設計的分發類型。處理常見的網站文件，如圖片、CSS、JavaSc ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.imgur.com/q4xr50n.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Allen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CHI-KEKE"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CHI-KEKE" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chilly37647@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">世界上總會有一些溫暖的小角落</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/24/lambdaExpression/" title="LambdaExpression"><img src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LambdaExpression"/></a><div class="content"><a class="title" href="/2024/11/24/lambdaExpression/" title="LambdaExpression">LambdaExpression</a><time datetime="2024-11-24T03:24:09.000Z" title="Created 2024-11-24 11:24:09">2024-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/07/Anonymous-type/" title="AnonymousType (匿名型別)"><img src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AnonymousType (匿名型別)"/></a><div class="content"><a class="title" href="/2024/11/07/Anonymous-type/" title="AnonymousType (匿名型別)">AnonymousType (匿名型別)</a><time datetime="2024-11-07T00:29:05.000Z" title="Created 2024-11-07 08:29:05">2024-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/03/Shallow-Copy-and-Deep-Clone/" title="Shallow Copy &amp; Deep Clone"><img src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Shallow Copy &amp; Deep Clone"/></a><div class="content"><a class="title" href="/2024/11/03/Shallow-Copy-and-Deep-Clone/" title="Shallow Copy &amp; Deep Clone">Shallow Copy &amp; Deep Clone</a><time datetime="2024-11-03T01:15:01.000Z" title="Created 2024-11-03 09:15:01">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/16/yield-return/" title="C# - Yield Return"><img src="https://i.imgur.com/Zly1UDM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C# - Yield Return"/></a><div class="content"><a class="title" href="/2024/10/16/yield-return/" title="C# - Yield Return">C# - Yield Return</a><time datetime="2024-10-16T00:21:11.000Z" title="Created 2024-10-16 08:21:11">2024-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/13/LINQ-5-SelectMany/" title="LINQ (五.SelectMany)"><img src="https://i.imgur.com/cBfeEDY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LINQ (五.SelectMany)"/></a><div class="content"><a class="title" href="/2024/10/13/LINQ-5-SelectMany/" title="LINQ (五.SelectMany)">LINQ (五.SelectMany)</a><time datetime="2024-10-13T02:52:11.000Z" title="Created 2024-10-13 10:52:11">2024-10-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C-%E8%88%9E%E6%83%B3/"><span class="card-category-list-name">C# 舞想</span><span class="card-category-list-count">38</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OOP/"><span class="card-category-list-name">OOP</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SQL/"><span class="card-category-list-name">SQL</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ThirdParty/"><span class="card-category-list-name">ThirdParty</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Tools/"><span class="card-category-list-name">Tools</span><span class="card-category-list-count">4</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Enum/" style="font-size: 1.1em; color: #999">Enum</a> <a href="/tags/DateTime/" style="font-size: 1.1em; color: #999">DateTime</a> <a href="/tags/Anonymous-Type/" style="font-size: 1.1em; color: #999">Anonymous Type</a> <a href="/tags/Memory/" style="font-size: 1.1em; color: #999">Memory</a> <a href="/tags/ThirdParty/" style="font-size: 1.1em; color: #999">ThirdParty</a> <a href="/tags/C/" style="font-size: 1.43em; color: #99a6b9">C#</a> <a href="/tags/Exception-Handling/" style="font-size: 1.23em; color: #999ea6">Exception Handling</a> <a href="/tags/SQL/" style="font-size: 1.37em; color: #99a4b2">SQL</a> <a href="/tags/AWS/" style="font-size: 1.1em; color: #999">AWS</a> <a href="/tags/Tools/" style="font-size: 1.23em; color: #999ea6">Tools</a> <a href="/tags/Code/" style="font-size: 1.3em; color: #99a1ac">Code</a> <a href="/tags/Environment-Variable/" style="font-size: 1.1em; color: #999">Environment Variable</a> <a href="/tags/Asynchronous-Programming/" style="font-size: 1.5em; color: #99a9bf">Asynchronous Programming</a> <a href="/tags/Validation/" style="font-size: 1.1em; color: #999">Validation</a> <a href="/tags/LINQ/" style="font-size: 1.17em; color: #999c9f">LINQ</a> <a href="/tags/OOP/" style="font-size: 1.1em; color: #999">OOP</a> <a href="/tags/ORM/" style="font-size: 1.1em; color: #999">ORM</a> <a href="/tags/Attribute/" style="font-size: 1.1em; color: #999">Attribute</a> <a href="/tags/Cache/" style="font-size: 1.1em; color: #999">Cache</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">November 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">May 2024</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">April 2024</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">52</div></div><div class="webinfo-item"><div class="item-name">Runtime :</div><div class="item-count" id="runtimeshow" data-publishDate="2024-03-01T10:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-12-22T03:31:23.200Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.imgur.com/yZlXwed.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 By Allen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">What you'll find out there is boundless freedom !</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>